---
import LogoEditorial from "../ui/LogoEditorial.astro";
import MainNav from "../nav/MainNav.astro";

interface Props {
  mode?: "home" | "default";
}

const { mode = "default" } = Astro.props;
---

<header
  id="site-header"
  data-state={mode === "home" ? "transparent" : "solid"}
  data-page={mode}
  class="fixed top-0 left-0 w-full z-[9999] transition-all duration-300"
>
  <div
    class="flex items-center justify-between
           px-6 md:px-12 xl:px-24
           py-5
           container-wide"
  >
    <!-- LOGO EDITORIAL -->
    <div
      id="header-logo"
      class={`transition-opacity duration-300
        ${mode === "home" ? "opacity-0 pointer-events-none" : "opacity-100"}`}
    >
      <LogoEditorial />
    </div>

    <MainNav />
  </div>
</header>

{
  mode === "home" && (
    <script>
      const header = document.getElementById("site-header");
      const logo = document.getElementById("header-logo");

      function updateHeader() {
        if (window.scrollY > 80) {
          header?.setAttribute("data-state", "solid");
          logo?.classList.remove("opacity-0", "pointer-events-none");
          logo?.classList.add("opacity-100");
        } else {
          header?.setAttribute("data-state", "transparent");
          logo?.classList.add("opacity-0", "pointer-events-none");
          logo?.classList.remove("opacity-100");
        }
      }

      window.addEventListener("scroll", updateHeader);
      updateHeader();
    </script>
  )
}

<style>
  /* HEADER TRANSPARENTE (HOME TOP) */
  header[data-state="transparent"] {
    background: transparent;
    color: white;
    border-bottom: 1px solid transparent;
  }

  header[data-state="transparent"] a {
    color: white;
  }

  /* HEADER SÃ“LIDO (SCROLL + INTERIORES) */
  header[data-state="solid"] {
    background: var(--color-base);
    color: var(--color-text);
    border-bottom: 1px solid var(--color-dark);
    backdrop-filter: saturate(180%) blur(6px);
  }

  header[data-state="solid"] a {
    color: var(--color-text);
  }

  header[data-state="solid"] a:hover {
    opacity: 0.7;
  }
</style>
