---
import Tag from "../ui/Tag.astro";
import { content } from "../../data/mock/content";

const url = new URL(Astro.request.url);
const monthFilter = url.searchParams.get("month");

const events = content.filter((item) => item.type === "EVENTO");

const filtered = monthFilter
  ? events.filter((event) => event.data.date?.startsWith(monthFilter))
  : events;
---

<section class="px-10 max-w-6xl space-y-8">
  {
    filtered.map((event) => (
      <article class="border-b pb-8">
        <Tag label="Evento" variant="event" />

        <h2 class="font-heading text-3xl mt-2">
          <a href={`/evento/${event.data.slug}`} class="underline">
            {event.data.title}
          </a>
        </h2>

        {event.data.date && <p class="opacity-70 mt-1">{event.data.date}</p>}
      </article>
    ))
  }

  {
    filtered.length === 0 && (
      <p class="opacity-60">No hay eventos para este periodo.</p>
    )
  }
</section>
