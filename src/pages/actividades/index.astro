---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { content } from "../../data/mock/content";
import Tag from "../../components/ui/Tag.astro";

/**
 * TODAS LAS ACTIVIDADES (Charlas, Talleres, Presentaciones)
 */
const actividades = content
  .filter((item) => item.type === "ACTIVIDAD")
  .sort((a, b) => {
    if (!a.data.date || !b.data.date) return 0;
    return a.data.date > b.data.date ? -1 : 1;
  });
---

<BaseLayout title="Actividades · Santako Music" mode="interior">
  <section id="actividades" class="section-actividades px-6 md:px-12 xl:px-24 py-24">
    <div class="max-w-6xl mx-auto">
      
      <!-- HEADER -->
      <header class="mb-12">
        <h1 class="font-heading text-4xl md:text-5xl mb-4">Actividades</h1>
        <p class="text-lg opacity-70 max-w-2xl">
          Charlas, talleres, presentaciones y encuentros culturales de la comunidad Santako Music.
        </p>
      </header>

      <!-- GRID -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {actividades.map((item) => (
          <article class="group">
            <a href={`/actividad/${item.data.slug}`} class="block aspect-video overflow-hidden rounded-lg mb-4 bg-neutral-100">
              <img
                src={item.data.images?.[0] || "/images/placeholder.svg"}
                alt={item.data.title}
                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                loading="lazy"
              />
            </a>

            <div class="flex items-center gap-3 mb-2">
              <Tag label={item.data.label} variant="actividad" />
              {item.data.date && (
                <time class="text-xs uppercase tracking-widest opacity-50">
                  {new Date(item.data.date).toLocaleDateString("es-ES", {
                    day: "numeric",
                    month: "short",
                    year: "numeric",
                  })}
                </time>
              )}
            </div>

            <h2 class="font-heading text-2xl mb-2">
              <a 
                href={`/actividad/${item.data.slug}`}
                class="hover:opacity-70 transition"
              >
                {item.data.title}
              </a>
            </h2>

            {item.data.description && (
              <p class="opacity-70 line-clamp-2 mb-4">
                {item.data.description}
              </p>
            )}

            <a
              href={`/actividad/${item.data.slug}`}
              class="inline-block text-sm uppercase tracking-widest border-b pb-1 hover:opacity-70 transition"
              style="border-color: var(--color-text);"
            >
              Ver más
            </a>
          </article>
        ))}
      </div>

      {actividades.length === 0 && (
        <p class="text-center opacity-70 py-12">
          No hay actividades programadas por el momento.
        </p>
      )}

    </div>
  </section>
</BaseLayout>
